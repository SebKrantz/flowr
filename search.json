[{"path":"https://sebkrantz.github.io/flowr/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Sebastian Krantz. Author, maintainer. Kamol Roy. Contributor, copyright holder.","code":""},{"path":"https://sebkrantz.github.io/flowr/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Krantz S (2025). flowr: Transport Modeling: Route Enumeration Traffic Assignment Path-Sized Logit. R package version 0.0.1, https://sebkrantz.github.io/flowr/.","code":"@Manual{,   title = {flowr: Transport Modeling: Route Enumeration and Traffic Assignment with the Path-Sized Logit},   author = {Sebastian Krantz},   year = {2025},   note = {R package version 0.0.1},   url = {https://sebkrantz.github.io/flowr/}, }"},{"path":"https://sebkrantz.github.io/flowr/index.html","id":"flowr","dir":"","previous_headings":"","what":"Transport Modeling in R","title":"Transport Modeling in R","text":"Transport Modeling: Route Enumeration Traffic Assignment Path-Sized Logit NOTE: Package still development flowr provides efficient tools transportation modeling, specifically route enumeration traffic assignment tasks. package implements path-sized logit (PSL) model traffic assignment provides powerful utilities network processing.","code":""},{"path":"https://sebkrantz.github.io/flowr/index.html","id":"features","dir":"","previous_headings":"","what":"Features","title":"Transport Modeling in R","text":"Path-Sized Logit Model: Efficient traffic assignment accounting route overlap Network Processing: Convert LINESTRING geometries graphs, consolidate graphs, simplify networks, handle directed/undirected graphs Route Enumeration: Efficient algorithm finding alternative routes origin-destination pairs High Performance: C implementations critical path operations","code":""},{"path":"https://sebkrantz.github.io/flowr/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Transport Modeling in R","text":"","code":"# Install development version from GitHub remotes::install_github(\"SebKrantz/flowr\")"},{"path":"https://sebkrantz.github.io/flowr/index.html","id":"dependencies","dir":"","previous_headings":"","what":"Dependencies","title":"Transport Modeling in R","text":"collapse (>= 2.0.0) - Fast data transformations igraph (>= 1.3.0) - Graph operations shortest path algorithms sf (>= 1.0.0) - Spatial data handling","code":""},{"path":[]},{"path":"https://sebkrantz.github.io/flowr/index.html","id":"basic-usage","dir":"","previous_headings":"Quick Start","what":"Basic Usage","title":"Transport Modeling in R","text":"","code":"library(flowr)  # Create a small graph data frame graph_df <- data.frame(   from = c(1, 2, 2, 3),   to   = c(2, 3, 4, 4),   cost = c(5, 3, 2, 4) )  # Prepare OD matrix with the same node IDs as in graph_df od_matrix_long <- data.frame(   from = c(1, 2, 3),   to   = c(4, 4, 4),   flow = c(100, 80, 60) )  # Run traffic assignment (and route enumeration) result <- run_assignment(graph_df, od_matrix_long)  # Access results result$final_flows"},{"path":"https://sebkrantz.github.io/flowr/index.html","id":"working-with-spatial-networks","dir":"","previous_headings":"Quick Start","what":"Working with Spatial Networks","title":"Transport Modeling in R","text":"","code":"library(flowr) library(sf)  # Read network from shapefile and create undirected graph (optional) graph_df <- st_read(\"data/network.shp\") |>    linestrings_to_graph() |>   create_undirected_graph()  # Read zone centroids and get nearest nodes od_zones <- st_read(\"data/od_zones.shp\") |> st_centroid() nodes <- nodes_from_graph(graph_df, sf = TRUE) nearest_nodes <- st_nearest_feature(od_zones, nodes)  # Consolidate Graph (optional) graph_df <- consolidate_graph(graph_df, keep = nearest_nodes, w = ~ cost)  # Simplify network by keeping only traversed edges along shortest paths (optional) graph_df <- simplify_network(graph_df, nearest_nodes, cost.column = \"cost\")"},{"path":[]},{"path":"https://sebkrantz.github.io/flowr/index.html","id":"traffic-assignment-and-route-enumeration","dir":"","previous_headings":"Main Functions","what":"Traffic Assignment and Route Enumeration","title":"Transport Modeling in R","text":"Iterates OD-pairs generating sensible alternative routes Assigns traffic flows network edges using path-sized logit model Supports directed undirected graphs Returns flows optional path/route information beta (default: -1): Path-sized logit parameter (beta_PSL) detour.max (default: 1.5): Maximum detour factor alternative routes. Higher values consider routes increase computation time angle.max (default: 90): Maximum detour angle degrees (two-sided) return.extra: Additional results return route enumeration stage (\"graph\", \"dmat\", \"paths\", \"edges\", \"counts\", \"costs\", \"weights\", \"\")","code":""},{"path":"https://sebkrantz.github.io/flowr/index.html","id":"network-processing","dir":"","previous_headings":"Main Functions","what":"Network Processing","title":"Transport Modeling in R","text":"linestrings_to_graph() - Convert LINESTRING geometries graph data frame create_undirected_graph() - Convert directed graph undirected edge aggregation consolidate_graph() - Consolidate graph removing intermediate nodes merging edges simplify_network() - Simplify network keeping edges traversed shortest paths","code":""},{"path":"https://sebkrantz.github.io/flowr/index.html","id":"graph-utilities","dir":"","previous_headings":"Main Functions","what":"Graph Utilities","title":"Transport Modeling in R","text":"nodes_from_graph() - Extract unique nodes coordinates graph normalize_graph() - Normalize node IDs consecutive integers starting 1 linestrings_from_graph() - Convert graph LINESTRING geometries dist_mat_from_graph() - Compute distance matrix node pairs","code":""},{"path":"https://sebkrantz.github.io/flowr/index.html","id":"example-workflow","dir":"","previous_headings":"","what":"Example Workflow","title":"Transport Modeling in R","text":"","code":"library(fastverse) fastverse_extend(flowr, sf)  # 1. Load network and OD zone nodes network <- st_read(\"data/network.shp\") od_zones <- st_read(\"data/od_zones.shp\") |> st_centroid() od_matrix <- fread(\"data/od_container_flows.csv\") |> qM(1) if(!all(dim(od_matrix) == nrow(od_zones))) stop(\"zones and OD matrix must match\")  # 2. Convert network to graph graph_df <- network |>   linestrings_to_graph() |>   create_undirected_graph()  # 3. Map zones to nearest network nodes nodes <- nodes_from_graph(graph_df, sf = TRUE) nearest_nodes <- st_nearest_feature(od_zones, nodes)  # 4. Prepare OD matrix od_matrix_long <- data.frame(   from = rep.int(nearest_nodes, ncol(od_matrix)),   to = rep(nearest_nodes, each = nrow(od_matrix)),   flow = vec(od_matrix) ) |> fsubset(is.finite(flow) & flow > 0)  # 5. Run assignment result <- run_assignment(graph_df, od_matrix_long)  # 6. Visualize results (optional) network$final_flows <- NA_real_ network$final_flows[attr(graph_df, \"group.starts\")] <- result$final_flows mapview::mapview(network, zcol = \"final_flows\")"},{"path":"https://sebkrantz.github.io/flowr/index.html","id":"authors","dir":"","previous_headings":"","what":"Authors","title":"Transport Modeling in R","text":"Sebastian Krantz (sebastian.krantz@graduateinstitute.ch) Kamol Roy (kamol.roy08@gmail.com)","code":""},{"path":"https://sebkrantz.github.io/flowr/index.html","id":"license","dir":"","previous_headings":"","what":"License","title":"Transport Modeling in R","text":"GPL-3","code":""},{"path":"https://sebkrantz.github.io/flowr/index.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Transport Modeling in R","text":"use flowr research, please cite:","code":"citation(\"flowr\")"},{"path":"https://sebkrantz.github.io/flowr/reference/consolidate_graph.html","id":null,"dir":"Reference","previous_headings":"","what":"Consolidate Graph — consolidate_graph","title":"Consolidate Graph — consolidate_graph","text":"Consolidate graph removing intermediate nodes (nodes occur exactly twice) optionally dropping loop, duplicate, singleton edges. simplifies network topology preserving connectivity.","code":""},{"path":"https://sebkrantz.github.io/flowr/reference/consolidate_graph.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Consolidate Graph — consolidate_graph","text":"","code":"consolidate_graph(   graph_df,   directed = FALSE,   drop.edges = c(\"loop\", \"duplicate\", \"single\"),   consolidate = TRUE,   keep.nodes = NULL,   ...,   recursive = TRUE,   verbose = TRUE )"},{"path":"https://sebkrantz.github.io/flowr/reference/consolidate_graph.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Consolidate Graph — consolidate_graph","text":"graph_df data frame representing graph columns: (node IDs), optionally columns preserve. coordinate columns (FX, FY, TX, TY) present, preserved updated based consolidated node coordinates. directed Logical (default: FALSE). Whether graph directed. drop.edges Character vector (default: c(\"loop\", \"duplicate\", \"single\")). Types edges drop: \"loop\" removes self-loops (edges == ), \"duplicate\" removes duplicate edges (-pair), \"single\" removes edges leading singleton nodes (nodes occur ). Set NULL keep edges. consolidate Logical (default: TRUE). TRUE, consolidates graph removing intermediate nodes (nodes occur exactly twice) merging connecting edges. FALSE, drops edges specified drop.edges. keep.nodes Numeric vector (optional). Node IDs preserve consolidation, even occur exactly twice. Also used preserve nodes dropping singleton edges. ... Arguments passed collap() aggregation across consolidated edges. defaults FUN = fmean numeric columns catFUN = fmode categorical columns. Select columns using cols use argument custom = list(fmean = cols1, fsum = cols2, fmode = cols3) map different columns specific aggregation functions. highly recommended weight aggregation (using w = ~ weight_col) length/cost edges. recursive Logical (default: TRUE). TRUE, recursively consolidates graph consolidation possible. ensures long chains intermediate nodes fully consolidated single call. verbose Logical (default: TRUE). Whether print messages dropped edges consolidation progress.","code":""},{"path":"https://sebkrantz.github.io/flowr/reference/consolidate_graph.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Consolidate Graph — consolidate_graph","text":"data frame representing consolidated graph : line - Line identifier (added first column) columns graph_df (aggregated consolidation occurred),       excluding , , optionally FX, FY, TX, TY       (re-added present original) , - Node IDs (updated consolidation) Coordinate columns (FX, FY, TX, TY) present original Attribute \"keep.edges\" - Indices original edges kept Attribute \"gid\" - Edge group IDs mapping consolidated edges original edges","code":""},{"path":"https://sebkrantz.github.io/flowr/reference/consolidate_graph.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Consolidate Graph — consolidate_graph","text":"function simplifies graph : Dropping edges: Optionally removes self-loops, duplicate edges, edges     leading singleton nodes (nodes appear graph) Consolidating nodes: Removes intermediate nodes (nodes occur exactly twice)     merging two edges connected single longer edge Aggregating attributes: edges merged, attributes/columns aggregated     using collap(). default aggregation mean numeric columns mode categorical columns. Recursive consolidation: recursive = TRUE, function continues     consolidating nodes can consolidated, ensuring complete simplification Consolidation useful simplifying network topology preserving connectivity. example, node B connects ->B B->C, removed replaced ->C. recursive = TRUE, long chains (->B->C->D) fully consolidated ->D single call. undirected graphs, algorithm also handles cases node appears twice either origin destination (circular cases). coordinate columns (FX, FY, TX, TY) present input, preserved updated based consolidated node coordinates original graph.","code":""},{"path":[]},{"path":"https://sebkrantz.github.io/flowr/reference/create_undirected_graph.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Undirected Graph — create_undirected_graph","title":"Create Undirected Graph — create_undirected_graph","text":"Convert directed graph undirected graph normalizing edges aggregating duplicate connections.","code":""},{"path":"https://sebkrantz.github.io/flowr/reference/create_undirected_graph.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Undirected Graph — create_undirected_graph","text":"","code":"create_undirected_graph(graph_df, ...)"},{"path":"https://sebkrantz.github.io/flowr/reference/create_undirected_graph.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Undirected Graph — create_undirected_graph","text":"graph_df data frame representing directed graph including columns: , , (optionally) line, FX, FY, TX, TY. ... Arguments passed collap() aggregation across duplicated (diretional) edges. defaults FUN = fmean numeric columns catFUN = fmode categorical columns. Select columns using cols use argument custom = list(fmean = cols1, fsum = cols2, fmode = cols3) map different columns specific aggregation functions. can weight aggregation (using w = ~ weight_col).","code":""},{"path":"https://sebkrantz.github.io/flowr/reference/create_undirected_graph.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Undirected Graph — create_undirected_graph","text":"data frame representing undirected graph : line - Line identifier (first value duplicates) - Starting node ID (normalized < ) - Ending node ID (normalized > ) FX - Starting node X-coordinate (first value duplicates) FY - Starting node Y-coordinate (first value duplicates) TX - Ending node X-coordinate (first value duplicates) TY - Ending node Y-coordinate (first value duplicates) Aggregated columns","code":""},{"path":"https://sebkrantz.github.io/flowr/reference/create_undirected_graph.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create Undirected Graph — create_undirected_graph","text":"function converts directed graph undirected graph : Normalizing edge directions < edges Collapsing duplicate edges (nodes) spatial/identifier columns (line, FX, FY, TX, TY),     taking first value duplicates aggregation columns, collap() applied.","code":""},{"path":"https://sebkrantz.github.io/flowr/reference/dist_mat_from_graph.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Distance Matrix from Graph — dist_mat_from_graph","title":"Compute Distance Matrix from Graph — dist_mat_from_graph","text":"Compute distance matrix node pairs graph using cppRouting.","code":""},{"path":"https://sebkrantz.github.io/flowr/reference/dist_mat_from_graph.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Distance Matrix from Graph — dist_mat_from_graph","text":"","code":"dist_mat_from_graph(graph_df, directed = FALSE, cost.column = \"cost\", ...)"},{"path":"https://sebkrantz.github.io/flowr/reference/dist_mat_from_graph.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute Distance Matrix from Graph — dist_mat_from_graph","text":"graph_df data frame representing graph columns: , , cost. directed Logical (default: FALSE). TRUE, treats graph directed; FALSE, treats undirected. cost.column Character string (optional). Name cost column graph_df. Alternatively, numeric vector edge costs length equal nrow(graph_df). ... Additional arguments passed distances(), v () compute paths specific nodes.","code":""},{"path":"https://sebkrantz.github.io/flowr/reference/dist_mat_from_graph.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute Distance Matrix from Graph — dist_mat_from_graph","text":"matrix distances node pairs, rows columns   correspond node IDs. matrix contains shortest path distances   (based cost column) pairs nodes.","code":""},{"path":"https://sebkrantz.github.io/flowr/reference/dist_mat_from_graph.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Compute Distance Matrix from Graph — dist_mat_from_graph","text":"function: Converts graph data frame cppRouting graph object Contracts graph efficient distance computation Computes distance matrix node pairs using specified algorithm graph contracted using cpp_contract optimize distance calculations, particularly efficient repeated queries.","code":""},{"path":"https://sebkrantz.github.io/flowr/reference/flowr-package.html","id":null,"dir":"Reference","previous_headings":"","what":"Transport Modeling — flowr-package","title":"Transport Modeling — flowr-package","text":"flowr provides efficient tools transportation modeling, specifically route enumeration traffic assignment tasks. package implements path-sized logit model traffic assignment provides utilities network processing. Network Processing linestrings_to_graph() — Convert LINESTRING geometries graphcreate_undirected_graph() — Convert directed graph undirectedconsolidate_graph() — Consolidate graph removing intermediate nodessimplify_network() — Simplify network keeping traversed edges Traffic Assignment run_assignment() — Run traffic assignment using path-sized logit model Graph Utilities nodes_from_graph() — Extract unique nodes graphnormalize_graph() — Normalize node IDs consecutive integerslinestrings_from_graph() — Convert graph LINESTRING geometriesdist_mat_from_graph() — Compute distance matrix graph","code":""},{"path":"https://sebkrantz.github.io/flowr/reference/flowr-package.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Transport Modeling — flowr-package","text":"package uses efficient C implementations critical path operations leverages: collapse - Fast data transformations igraph - Graph operations shortest path algorithms","code":""},{"path":"https://sebkrantz.github.io/flowr/reference/flowr-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Transport Modeling — flowr-package","text":"Sebastian Krantz sebastian.krantz@graduateinstitute.ch Kamol Roy kamol.roy08@gmail.com","code":""},{"path":"https://sebkrantz.github.io/flowr/reference/linestrings_from_graph.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert Graph to Linestrings — linestrings_from_graph","title":"Convert Graph to Linestrings — linestrings_from_graph","text":"Convert graph data frame node coordinates sf object LINESTRING geometries.","code":""},{"path":"https://sebkrantz.github.io/flowr/reference/linestrings_from_graph.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert Graph to Linestrings — linestrings_from_graph","text":"","code":"linestrings_from_graph(graph_df, crs = 4326)"},{"path":"https://sebkrantz.github.io/flowr/reference/linestrings_from_graph.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert Graph to Linestrings — linestrings_from_graph","text":"graph_df data frame representing graph columns: FX, FY, TX, TY (starting ending node coordinates), optionally columns preserve. crs Numeric character (default: 4326). Coordinate reference system assign output sf object.","code":""},{"path":"https://sebkrantz.github.io/flowr/reference/linestrings_from_graph.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert Graph to Linestrings — linestrings_from_graph","text":"sf data frame LINESTRING geometry, containing columns   graph_df except FX, FY, TX, TY. row   represents edge LINESTRING connecting -node (FX, FY)   -node (TX, TY).","code":""},{"path":"https://sebkrantz.github.io/flowr/reference/linestrings_from_graph.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Convert Graph to Linestrings — linestrings_from_graph","text":"function inverse operation linestrings_to_graph. : Creates LINESTRING geometries node coordinates (FX, FY, TX, TY) Removes coordinate columns output Preserves columns input graph data frame Returns sf object suitable spatial operations visualization","code":""},{"path":[]},{"path":"https://sebkrantz.github.io/flowr/reference/linestrings_to_graph.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert Linestring to Graph — linestrings_to_graph","title":"Convert Linestring to Graph — linestrings_to_graph","text":"Convert Linestring Graph","code":""},{"path":"https://sebkrantz.github.io/flowr/reference/linestrings_to_graph.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert Linestring to Graph — linestrings_to_graph","text":"","code":"linestrings_to_graph(   lines,   digits = 6,   keep.cols = is.atomic,   compute.length = TRUE )"},{"path":"https://sebkrantz.github.io/flowr/reference/linestrings_to_graph.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert Linestring to Graph — linestrings_to_graph","text":"lines sf data frame LINESTRING geometries. digits Numeric rounding applied coordinates (ensure matching points across different linestrings impaired numeric precision issues). Set NA/Inf/FALSE disable. keep.cols Character vector column names keep input data frame. compute.length Applies st_length() saves additional column named \".length\".","code":""},{"path":"https://sebkrantz.github.io/flowr/reference/linestrings_to_graph.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert Linestring to Graph — linestrings_to_graph","text":"data.frame representing graph columns: line - Line identifier - Starting node ID FX - Starting node X-coordinate (longitude) FY - Starting node Y-coordinate (latitude) - Ending node ID TX - Ending node X-coordinate (longitude) TY - Ending node Y-coordinate (latitude)","code":""},{"path":[]},{"path":"https://sebkrantz.github.io/flowr/reference/nodes_from_graph.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract Nodes from Graph — nodes_from_graph","title":"Extract Nodes from Graph — nodes_from_graph","text":"Extract unique nodes coordinates graph data frame.","code":""},{"path":"https://sebkrantz.github.io/flowr/reference/nodes_from_graph.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract Nodes from Graph — nodes_from_graph","text":"","code":"nodes_from_graph(graph_df, sf = FALSE, crs = 4326)"},{"path":"https://sebkrantz.github.io/flowr/reference/nodes_from_graph.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract Nodes from Graph — nodes_from_graph","text":"graph_df data frame representing graph columns: , , FX, FY, TX, TY. sf Logical. TRUE, returns result sf POINT object. Default: FALSE. crs Coordinate reference system sf output; default 4326.","code":""},{"path":"https://sebkrantz.github.io/flowr/reference/nodes_from_graph.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract Nodes from Graph — nodes_from_graph","text":"data frame (sf object sf = TRUE) unique nodes coordinates: node - Node ID X - Node X-coordinate (typically longitude) Y - Node Y-coordinate (typically latitude) Result sorted node ID.","code":""},{"path":"https://sebkrantz.github.io/flowr/reference/nodes_from_graph.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Extract Nodes from Graph — nodes_from_graph","text":"function extracts unique nodes columns graph, along corresponding coordinates. Duplicate nodes removed, keeping unique node IDs coordinates.","code":""},{"path":"https://sebkrantz.github.io/flowr/reference/normalize_graph.html","id":null,"dir":"Reference","previous_headings":"","what":"Normalize Graph Node IDs — normalize_graph","title":"Normalize Graph Node IDs — normalize_graph","text":"Normalize node IDs graph consecutive integers starting 1.   useful ensuring compatibility graph algorithms require sequential node IDs.","code":""},{"path":"https://sebkrantz.github.io/flowr/reference/normalize_graph.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Normalize Graph Node IDs — normalize_graph","text":"","code":"normalize_graph(graph_df)"},{"path":"https://sebkrantz.github.io/flowr/reference/normalize_graph.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Normalize Graph Node IDs — normalize_graph","text":"graph_df data frame representing graph columns: (node IDs).","code":""},{"path":"https://sebkrantz.github.io/flowr/reference/normalize_graph.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Normalize Graph Node IDs — normalize_graph","text":"data frame structure graph_df,   columns remapped consecutive integer IDs starting 1.   columns preserved unchanged.","code":""},{"path":"https://sebkrantz.github.io/flowr/reference/normalize_graph.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Normalize Graph Node IDs — normalize_graph","text":"function: Extracts unique node IDs columns Sorts ascending order Remaps original node IDs sequential integers (1, 2, 3, ...) Updates columns normalized IDs Normalization useful : Node IDs non-consecutive (e.g., 1, 5, 10, 20) Node IDs non-numeric contain gaps Graph algorithms require sequential integer node IDs starting 1 Note: function normalizes node IDs; modify graph structure attributes. mapping preserves relative ordering nodes.","code":""},{"path":[]},{"path":"https://sebkrantz.github.io/flowr/reference/print.flowr.html","id":null,"dir":"Reference","previous_headings":"","what":"Print Flowr Object — print.flowr","title":"Print Flowr Object — print.flowr","text":"Print method objects class flowr. Displays summary flow assignment result.","code":""},{"path":"https://sebkrantz.github.io/flowr/reference/print.flowr.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print Flowr Object — print.flowr","text":"","code":"# S3 method for class 'flowr' print(x, ...)"},{"path":"https://sebkrantz.github.io/flowr/reference/print.flowr.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print Flowr Object — print.flowr","text":"x object class flowr, typically returned run_assignment. ... Additional arguments (currently ignored).","code":""},{"path":"https://sebkrantz.github.io/flowr/reference/run_assignment.html","id":null,"dir":"Reference","previous_headings":"","what":"Run Traffic Assignment — run_assignment","title":"Run Traffic Assignment — run_assignment","text":"Assign traffic flows network edges using path-sized logit (PSL) model.","code":""},{"path":"https://sebkrantz.github.io/flowr/reference/run_assignment.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Run Traffic Assignment — run_assignment","text":"","code":"run_assignment(   graph_df,   od_matrix_long,   directed = FALSE,   cost.column = \"cost\",   method = \"PSL\",   beta = -1,   ...,   detour.max = 1.5,   angle.max = 90,   return.extra = NULL,   precompute.dmat = TRUE,   verbose = TRUE )"},{"path":"https://sebkrantz.github.io/flowr/reference/run_assignment.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Run Traffic Assignment — run_assignment","text":"graph_df data.frame columns , , optionally cost column. Represents network graph edges nodes. od_matrix_long data.frame columns , , flow. Represents origin-destination matrix long format flow values. directed Logical (default: FALSE). Whether graph directed. cost.column Character string (default: \"cost\") numeric vector. Name cost column graph_df, numeric vector edge costs length equal nrow(graph_df). method Character string (default: \"PSL\"). Assignment method. Currently \"PSL\" (Path-Sized Logit) implemented. beta Numeric (default: -1). Path-sized logit parameter (beta_PSL). ... Currently used. detour.max Numeric (default: 1.5). Maximum detour factor alternative routes (applied shortest paths cost). key parameter controlling execution time algorithm: considering routes (higher detour.max) substantially increases computation time. angle.max Numeric (default: 90). Maximum detour angle (degrees, two sided). .e., nodes within angle measured straight line origin destination node considered detours. return.extra Character vector specifying additional results return. Options include: \"graph\", \"dmat\", \"paths\" (memory intensive), \"edges\", \"counts\", \"costs\", \"weights\". Use \"\" return available extra results. precompute.dmat description verbose Show progress bar?","code":""},{"path":"https://sebkrantz.github.io/flowr/reference/run_assignment.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Run Traffic Assignment — run_assignment","text":"list containing: call - function call final_flows - Numeric vector assigned flows edge Additional elements specified return.extra","code":""},{"path":"https://sebkrantz.github.io/flowr/reference/run_assignment.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Run Traffic Assignment — run_assignment","text":"function performs traffic assignment using path-sized logit model: Creates graph graph_df using igraph Computes shortest path distance matrix node pairs origin-destination pair od_matrix_long: Identifies alternative routes (detours) within detour.max shortest path cost Finds shortest paths origin intermediate nodes intermediate nodes destination Filters paths remove duplicate edges Computes path-sized logit probabilities accounting route overlap Assigns flows edges based probabilities Returns results including final flows optionally additional information path-sized logit model accounts route overlap adjusting probabilities based number alternative routes using edge. Flows assigned proportionally computed probabilities.","code":""},{"path":[]},{"path":"https://sebkrantz.github.io/flowr/reference/simplify_network.html","id":null,"dir":"Reference","previous_headings":"","what":"Simplify Network — simplify_network","title":"Simplify Network — simplify_network","text":"Simplify network keeping edges traversed shortest paths   origin-destination pairs OD matrix.","code":""},{"path":"https://sebkrantz.github.io/flowr/reference/simplify_network.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Simplify Network — simplify_network","text":"","code":"simplify_network(   x,   od_matrix_long,   cost.column = NULL,   return = c(\"edges\", \"edge_counts\", \"graph_df\") )"},{"path":"https://sebkrantz.github.io/flowr/reference/simplify_network.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Simplify Network — simplify_network","text":"x Either sf object LINESTRING geometry representing network, data.frame columns representing graph edges. od_matrix_long data.frame representing origin-destination matrix long format. x LINETRING geometry, columns FX, FY, TX, TY representing origin/destination zone centroids. x graph data frame, columns matching nodes x. cost.column Character string (optional). Name cost column x. NULL x sf object, uses st_length(x) cost. return description","code":""},{"path":"https://sebkrantz.github.io/flowr/reference/simplify_network.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Simplify Network — simplify_network","text":"x sf object, returns list : network - sf object containing edges traversed graph_df - data.frame graph representation traversed edges x data.frame, returns data.frame containing edges traversed.","code":""},{"path":"https://sebkrantz.github.io/flowr/reference/simplify_network.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Simplify Network — simplify_network","text":"function simplifies network : Converting input graph representation (needed) Validating origin destination nodes exist network Computing shortest paths origin destinations using igraph Marking edges traversed least one shortest path Returning subset edges traversed function filters OD matrix include rows finite, positive flow values. shortest paths computed using edge costs (either cost.column geometric length sf objects).","code":""}]
